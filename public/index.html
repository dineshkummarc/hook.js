<html>
<head>
<!--
   NOTICE: The hook.js file is auto-generated from the http://github.com/hookio/browser project
           This file has been copy and pasted into /public/hook.js as a connivence...
-->
<script type="text/javascript" src="hook.js"></script>
<script type="text/javascript" src="jquery.js"></script>

<script type="text/javascript">

    //
    // TODO: Move this to hook-shim, will create magic Hook namespace
    //
    var Hook = require('/hook.js').Hook;
    Hook = new Hook();
    Hook.connect();

    Hook.on('ready', function(){

      //
      // Remark: Use Hook.anAny to capture all Hook events for debugging
      //
      Hook.onAny(function(data){
        $('#pipe').prepend('<li>' + this.event + '</li>');
        console.log(this.event, data);
      });

      Hook.emit('hello', 'i am browser!');

      //
      // Remark: Some people enjoy getting callbacks for messages
      //
      Hook.emit('cakeRequest', 'Cake please?', function(err, result){
        console.log(result);
      });

      Hook.emit('cakeRequest', 'I DEMAND CAKE', function(err, result){
        console.log(result);
      });


    });

</script>

</head>
<body>
  <div>
    <pre><code>
      hook.js - the easiest way to build real-time web applications


      Just include this on any page: 
      
        &lt;script type="text/javascript" src="http://hookjs.com/hook.js"&gt;&lt;/script&gt;

      Now you have access to the "hook" object. The hook object is special object which
      gives you the ability to seamlessly call server events from the browser and browser events from the server.
      
      
    </code></pre>

    <textarea cols="80" rows="10">
// Browser
hook.emit('hello', function(err, result){
  // outputs 'sup'
  console.log(result);
});

// Server
hook.on('hello', function(callback){
  callback(null, 'sup');
});
    </textarea>
    
    <br/>
    
    Current pipe: <span id="mypipe"></span> <br/>
    
    <ul id="pipe">
      <li>Pipe 1 - hello</li>
    </ul>
    
    <br/>
    
    Other available pipes: <br/>
    <ul>
      <li>Pipe 1</li>
      <li>Pipe 2</li>
      <li>Pipe 3</li>
    </ul>
    
    
    Available Interfaces to this Hook.js Server:
    
    <ul>
      <li>Webserver ( this page )</li>
      <li>Webhook</li>
      <li>Feed</li>
    </ul>
    
  </div>
</body>
</html>
